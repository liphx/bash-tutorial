# vim - Vi IMproved

`vim [参数] [文件 ..]` 编辑指定的文件

## 移动光标

`h` `←` 向左移动  
`j` `↓` 向下移动  
`k` `↑` 向上移动  
`l` `→` 向右移动  
`w` 移动到下一个单词前  
`e` 移动到单词末尾  
数字 + `w` | `e` 移动多个单词  
`0` 移动到行首  
`$` 移动到行尾  
`3$` 移动到下面第3行行尾，本行是第一行  
`^` 移动到行首第一个非空字符  
`3^` 依然作用于本行  

## 滚屏
`CTRL-U` 上移半屏  
`CTRL-D` 下移半屏  
`CTRL-Y` 上移一行  
`CTRL-E` 下移一行  
`CTRL-B` 上移一屏  
`CTRL-F` 下移一屏  
`zz` 将当前行置于屏幕中央  
`zt` 将当前行置顶  
`zb` 将当前行置底  

## Vim进入和退出

Shell  
`vim file` 进入vim编辑file

Normal  
`:q!` 丢弃修改退出  
`:wq` 保存后退出  
`:w file` 保存在file文件中  
按下 `ESC` 键会回到正常模式或者撤消一个不想输入或部分完整的命令

## 文本可视

`v` 可视文本

## 删除文本

Normal  
`x`   删除光标所在位置的字符  
`dw`  从当前光标当前位置直到下一个单词起始处  
`de`  从当前光标当前位置直到单词末尾  
`d$`  从当前光标删除到行末  
`dnw` 删除n个单词  
`dd`  删除整行  
`ndd` 删除n行  
`J`   删除两行之间的换行符

## 复制粘贴

`y` 在可视状态下输入y进行复制  
`yw` `yy` 复制单词 | 整行  
`p` 在下一行粘贴， 复制和删除的行会保存到 Vim 的一个寄存器中，按`p`可粘贴  

## 撤销

`u`      撤消最后执行的命令  
`U`      撤消对整行的修改  
`CTRL R` 撤销之前的撤销,取消一个u

## 插入文本

Normal
`i` 在光标处插入文本  
`a` 在单词后插入文本  
`A` 在行尾添加文本  
`o` 在光标下行插入一行并进入插入模式  
`O` 在光标上行插入一行并进入插入模式  
`r` 在光标处替换字符  
`R` 在光标处连续替换字符  
`ce` `cw` `c$`  删除 一个单词 | 整行 并进入插入模式  
`r file` 将file文件的内容插入进来  
`r !cmd` 将cmd的输出插入进来

## 定位

```
CTRL-G 显示当前编辑的文件名和文件中光标位置  
G 跳到文件最后一行  
gg 跳到文件第一行  
nG 跳到 n 行  
`` '' 跳转回之前的位置
```

## 搜索

Normal  
`/string + 回车` 向下查找 要查找特殊字符需要用'\'来转义 .*[]^%/\?~$
`?string + 回车` 逆向查找  
`n` 查找下一个  
`3n` 查找下面第3个  
`N` 查找上一个  
`CTRL O` 回到之前的位置  
`CTRL I` 回到新的位置  
`%` 匹配括号，在`([{}])` 处按`%`会跳到匹配的括号处(再按一次就会回到之前的括号处)  
光标移到字符串上，输入* 会自动查找 输入#反向查找  

## 替换

`:s/old/new` 改变光标所在行的第一个匹配串  
`:s/old/new/g` 替换全行的匹配串  
`:%s/old/new/g` 替换整个文件中的每个匹配串。  
`%s/old/new/gc` 找到整个文件中的每个匹配串，并且对每个匹配串提示是否进行替换  
`:#,#s/old/new/g` 替换两行之间出现的每个匹配串，#,# 代表的是替换操作的若干行中首尾两行的行号

## 执行外部命令

`:!cmd` 回车后在shell执行cmd

## 设置类命令

`:set`  
`ic` `ignorecase` 查找时忽略字母大小写  
`is` `incsearch` 查找短语时显示部分匹配  
`hls` `hlsearch` 高亮显示所有的匹配短语  
`/string\c` 在一次查找中忽略大小写  
 在选项前加上 no 可以关闭选项

## 帮助

`:help cmd` 显示cmd的帮助信息  
`CTRL W` 在窗口间跳转

## 配置

`~/.vimrc`文件

## 补全

`:set nocp` 不与Vi兼容模式  
`<TAB>` 尝试自动补全  
`CTRL D` 显示命令列表
